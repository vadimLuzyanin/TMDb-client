(this["webpackJsonptmdb-client"]=this["webpackJsonptmdb-client"]||[]).push([[0],{68:function(e,t,a){e.exports=a(81)},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),o=a(19),l=a(6),s=a(43),u=a.n(s),m=a(51),d=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in"https://api.themoviedb.org/3/","0867e0e2e27f17e1b459b2d3ef7f5fdb",n="".concat("https://api.themoviedb.org/3/").concat(t,"?api_key=").concat("0867e0e2e27f17e1b459b2d3ef7f5fdb"),a)a[r]&&(n+="&".concat(r,"=").concat(a[r]));return e.next=6,fetch(n);case 6:return c=e.sent,e.next=9,c.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),f=a(52),p=a.n(f),v=a(21),b=a(107),g=a(83),h=a(110),E=a(84),j=Object(b.a)({root:{display:"flex",flexDirection:"column",justifyContent:"flex-start",width:"200px",margin:"25px",minHeight:"500px",outline:function(e){return e.isFavorite&&"5px solid red"}},imageContainer:{position:"relative",overflow:"hidden",height:"300px",width:"200px",backgroundImage:"url('http://placehold.jp/200x300.png')"},setFavoriteButton:{color:"white",position:"absolute",bottom:0,left:0,right:0,transform:function(e){return e.hovered?"translateY(0)":"translateY(100%)"},transition:"0.1s ease",display:"flex",justifyContent:"center",alignItems:"center"},link:{textDecoration:"none",width:"100%"},linkButton:{minHeight:"100px"},genresContainer:{padding:"15px"}}),O=function(e){var t=e.content,a=e.isFavorite,c=e.switchFavorite,i=e.allGenreList,o=Object(n.useState)(!1),s=Object(l.a)(o,2),u=s[0],m=s[1],d=j({isFavorite:a,hovered:u}),f=t.genre_ids?t.genre_ids.map((function(e){return i.find((function(t){return t.id===e})).name})).map((function(e,t,a){return r.a.createElement("span",{key:e},e,t!==a.length-1&&","," ")})):t.genres?t.genres.map((function(e,t,a){return r.a.createElement("span",{key:e.name},e.name,t!==a.length-1&&","," ")})):null,p=t.poster_path?"https://image.tmdb.org/t/p/w500".concat(t.poster_path):"http://placehold.jp/200x300.png";return r.a.createElement(g.a,{elevation:6,className:d.root},r.a.createElement("div",{className:d.imageContainer,onMouseOver:function(){m(!0)},onMouseOut:function(){m(!1)}},r.a.createElement("img",{width:"100%",src:p,alt:"poster"}),r.a.createElement(h.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){return c(t.id)},className:d.setFavoriteButton},a?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),r.a.createElement(v.b,{to:"/details/".concat(t.id,"/"),className:d.link},r.a.createElement(h.a,{variant:"outlined",color:"secondary",fullWidth:!0,className:d.linkButton},r.a.createElement(E.a,{align:"center"},t.title))),r.a.createElement("div",{className:d.genresContainer},r.a.createElement(E.a,{align:"center"},"\u0416\u0430\u043d\u0440\u044b:"),r.a.createElement(E.a,{align:"center"},f.length&&f||"\u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")))},y=a(27),x=a(111),w=a(112),N=a(113),k=a(117),C=a(12),S=a(59),I=a.n(S),D=a(116),_=a(57),R=a.n(_),L=a(58),F=a.n(L),B=Object(b.a)((function(e){var t;return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={flexGrow:1,display:"none"},Object(y.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(y.a)(t,"marginLeft","25px"),t),search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(C.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(C.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),drawer:{maxWidth:"250px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},emptyDrawer:{margin:"25px 0"},tmdb:{marginBottom:"15px"}}})),W=function(e){var t=e.setSearchState,a=e.favoriteCards,c=B(),i=Object(n.useState)(""),o=Object(l.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),f=d[0],p=d[1];Object(n.useEffect)((function(){var e=setTimeout((function(){t(s)}),100);return function(){clearTimeout(e)}}),[s,t]);return r.a.createElement("div",{className:c.root},r.a.createElement(x.a,{position:"fixed"},r.a.createElement(w.a,null,r.a.createElement(N.a,{edge:"start",className:c.menuButton,color:"inherit",onClick:function(){return p(!0)}},r.a.createElement(R.a,null)),r.a.createElement(v.b,{to:"/",style:{color:"inherit",textDecoration:"inherit"}},r.a.createElement(N.a,{edge:"start",color:"inherit",onClick:function(){t(""),u("")}},r.a.createElement(F.a,null))),r.a.createElement(E.a,{className:c.title,variant:"h6",noWrap:!0},"TMDb client"),r.a.createElement(v.b,{to:"/",style:{color:"inherit",textDecoration:"inherit"}},r.a.createElement("div",{className:c.search},r.a.createElement("div",{className:c.searchIcon},r.a.createElement(I.a,null)),r.a.createElement(k.a,{placeholder:"\u041f\u043e\u0438\u0441\u043a...",classes:{root:c.inputRoot,input:c.inputInput},value:s,onChange:function(e){u(e.target.value.trim())}}))))),r.a.createElement(D.a,{anchor:"left",open:f,onClose:function(){return p(!1)}},r.a.createElement("div",{className:c.drawer},r.a.createElement(E.a,{variant:"h4",align:"center"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"),a.length&&a||r.a.createElement(g.a,{elevation:6,className:c.emptyDrawer},r.a.createElement(E.a,{variant:"h3",align:"center"},"\u041f\u043e\u043a\u0430 \u0447\u0442\u043e \u0432\u044b \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043d\u0438 \u043e\u0434\u0438\u043d \u0444\u0438\u043b\u044c\u043c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),r.a.createElement("img",{width:"50%",className:c.tmdb,src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",alt:"tmdb-logo"}),r.a.createElement(E.a,{variant:"caption",align:"center"},"This product uses the TMDb API but is not endorsed or certified by TMDb."))))},M=a(23),T=a(114),G=a(60),A=a.n(G),z=a(61),J=a.n(z),H=Object(b.a)({root:{display:"flex",flexDirection:"row",position:"relative",maxWidth:"500px",maxHeight:"280px"},arrowLeft:{height:"100%",position:"absolute",left:"0",color:"white",zIndex:100},arrowRight:{height:"100%",position:"absolute",right:"0",color:"white",zIndex:101},arrowIcon:{fontSize:"50px"},imgContainer:{overflow:"hidden"},imgContainerInner:{display:"flex",flexDirection:"row",transform:function(e){return"translateX(".concat(-100*e.imageVisible,"%)")},transition:"0.3s ease",zIndex:1}}),q=function(e){var t=e.images,a=Object(n.useState)(0),c=Object(l.a)(a,2),i=c[0],o=c[1],s=H({imageVisible:i});return r.a.createElement("div",{className:s.root},r.a.createElement(h.a,{className:s.arrowLeft,onClick:function(){var e=t.length-1;o((function(t){return t<=0?e:t-1}))}},r.a.createElement(A.a,{className:s.arrowIcon})),r.a.createElement("div",{className:s.imgContainer},r.a.createElement("div",{className:s.imgContainerInner},t)),r.a.createElement(h.a,{className:s.arrowRight,onClick:function(){var e=t.length-1;o((function(t){return t>=e?0:t+1}))}},r.a.createElement(J.a,{className:s.arrowIcon})))},V=Object(b.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"25px"},tagline:{fontSize:"15px"},paper:{padding:"15px",marginBottom:"15px",minWidth:"35%"},paperRow:{display:"flex",flexDirection:"row",justifyContent:"space-between"},overview:{maxWidth:"1200px"},similarAndRecommendationsContainer:{display:"flex",flexDirection:"column",marginTop:"25px",maxWidth:"90%"},similarAndRecommendationsInner:{display:"flex",flexDirection:"row",overflow:"auto",maxWidth:"1200px"}}),Y=function(e){var t=e.favoriteList,a=e.switchFavorite,c=e.allGenreList,i=V(),o=Object(n.useState)({}),s=Object(l.a)(o,2),u=s[0],m=s[1],f=Object(n.useState)({}),p=Object(l.a)(f,2),v=p[0],b=p[1],j=Object(M.f)().movieDetailId,y=Object(n.useState)(!1),x=Object(l.a)(y,2),w=x[0],N=x[1],k=Object(n.useState)({}),C=Object(l.a)(k,2),S=C[0],I=C[1],D=Object(n.useState)({}),_=Object(l.a)(D,2),R=_[0],L=_[1];Object(n.useEffect)((function(){N(t.includes(+j))}),[t,j]),Object(n.useEffect)((function(){!function(e,t){d("movie/".concat(e),{language:"ru"}).then((function(e){t(e)}))}(j,m),function(e,t){d("movie/".concat(e,"/images"),{include_image_language:"null,ru"}).then((function(e){t(e)}))}(j,b),function(e,t){d("movie/".concat(e,"/recommendations"),{language:"ru"}).then((function(e){t(e)}))}(j,I),function(e,t){d("movie/".concat(e,"/similar"),{language:"ru"}).then((function(e){t(e)}))}(j,L)}),[j]);var F=v.posters&&v.backdrops.map((function(e){return r.a.createElement("img",{key:e.file_path,alt:"backdrop",style:{maxWidth:"100%"},src:"https://image.tmdb.org/t/p/w500/".concat(e.file_path)})})),B=u.genres&&u.genres.map((function(e,t,a){return r.a.createElement("span",{key:e.name},e.name,t!==a.length-1&&", ")})),W=S.results&&S.results.map((function(e){return r.a.createElement(O,{key:e.id,content:e,isFavorite:t.includes(e.id),allGenreList:c,switchFavorite:a})})),G=R.results&&R.results.map((function(e){return r.a.createElement(O,{key:e.id,content:e,isFavorite:t.includes(e.id),allGenreList:c,switchFavorite:a})}));return r.a.createElement("div",{className:i.root},r.a.createElement(q,{images:F}),r.a.createElement(E.a,{variant:"h2",align:"center"},u.title),u.tagline?r.a.createElement(E.a,{variant:"overline",align:"center",className:i.tagline},u.tagline):null,r.a.createElement(g.a,{elevation:6,className:i.paper},B?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u0416\u0430\u043d\u0440\u044b:"),r.a.createElement(E.a,{variant:"body1"},B)):null,u.budget?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u0411\u044e\u0434\u0436\u0435\u0442:"),r.a.createElement(E.a,{variant:"body1"},u.budget," $")):null,u.revenue?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u0414\u043e\u0445\u043e\u0434:"),r.a.createElement(E.a,{variant:"body1"},u.revenue," $")):null,u.release_date?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430:"),r.a.createElement(E.a,{variant:"body1"},u.release_date)):null,u.runtime?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: "),r.a.createElement(E.a,{variant:"body1"},function(e){var t=e+"";switch(t[t.length-1]){case"1":return"".concat(t," \u043c\u0438\u043d\u0443\u0442\u0430");case"2":case"3":case"4":return"".concat(t," \u043c\u0438\u043d\u0443\u0442\u044b");default:return"".concat(t," \u043c\u0438\u043d\u0443\u0442")}}(u.runtime))):null,u.vote_average?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430: "),r.a.createElement(E.a,{variant:"body1"},u.vote_average)):null,u.vote_count?r.a.createElement("div",{className:i.paperRow},r.a.createElement(E.a,{variant:"body1"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0446\u0435\u043d\u043e\u043a: "),r.a.createElement(E.a,{variant:"body1"},u.vote_count)):null),u.overview?r.a.createElement(E.a,{variant:"h6",align:"center",className:i.overview},u.overview):null,u.homepage?r.a.createElement(T.a,{variant:"h5",href:u.homepage},"\u0421\u0430\u0439\u0442 \u0444\u0438\u043b\u044c\u043c\u0430"):null,r.a.createElement(h.a,{variant:"contained",color:"secondary",onClick:function(){return a(+j)}},w?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),G&&0!==G.length&&r.a.createElement("div",{className:i.similarAndRecommendationsContainer},r.a.createElement(E.a,{variant:"h2",align:"center"},"\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"),r.a.createElement(g.a,{elevation:6,className:i.similarAndRecommendationsInner},G)),W&&0!==W.length&&r.a.createElement("div",{className:i.similarAndRecommendationsContainer},r.a.createElement(E.a,{variant:"h2",align:"center"},"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"),r.a.createElement(g.a,{elevation:6,className:i.similarAndRecommendationsInner},W)))},$=a(115),P=Object(b.a)({root:{width:"100%",height:"300px",display:"flex",justifyContent:"center",alignItems:"center",margin:"25px"}}),X=function(){var e=P();return r.a.createElement(g.a,{elevation:6,className:e.root},r.a.createElement(E.a,{variant:"h2"},"Loading..."))},K=a(62),Q=a(46),U=a.n(Q),Z=a(47),ee=a.n(Z),te=Object(b.a)({root:{display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap"}}),ae=function(e){var t=e.setDiscoverSortBy,a=e.setDiscoverSortOrder,c=te(),i=Object(n.useState)({by:"popularity",order:"desc"}),o=Object(l.a)(i,2),s=o[0],u=o[1],m=function(e){e===s.by?u((function(e){return Object(K.a)({},e,{order:"desc"===e.order?"asc":"desc"})})):u({by:e,order:"desc"})};return Object(n.useEffect)((function(){t(s.by),a(s.order)}),[s,t,a]),r.a.createElement("div",{className:c.root},r.a.createElement(h.a,{endIcon:"asc"===s.order?r.a.createElement(U.a,null):r.a.createElement(ee.a,null),variant:"popularity"===s.by?"contained":"outlined",color:"primary",onClick:function(){return m("popularity")}},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c"),r.a.createElement(h.a,{endIcon:"asc"===s.order?r.a.createElement(U.a,null):r.a.createElement(ee.a,null),variant:"vote_count"===s.by?"contained":"outlined",color:"primary",onClick:function(){return m("vote_count")}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u043e\u043b\u043e\u0441\u043e\u0432"))},ne=Object(b.a)({root:{margin:"85px auto 0 auto"},cardsContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",justifyContent:"center"}}),re=function(){var e=ne(),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)([]),u=Object(l.a)(s,2),m=u[0],f=u[1],b=Object(n.useState)(0),g=Object(l.a)(b,2),h=g[0],E=g[1],j=Object(n.useState)(50),y=Object(l.a)(j,2),x=y[0],w=y[1],N=Object(n.useState)([]),k=Object(l.a)(N,2),C=k[0],S=k[1],I=Object(n.useState)(""),D=Object(l.a)(I,2),_=D[0],R=D[1],L=Object(n.useState)("popularity"),F=Object(l.a)(L,2),B=F[0],T=F[1],G=Object(n.useState)("desc"),A=Object(l.a)(G,2),z=A[0],J=A[1];Object(n.useEffect)((function(){!function(e){d("genre/movie/list",{language:"ru"}).then((function(t){e(t.genres)}))}(S)}),[]);var H=function(e){c.includes(e)?i((function(t){return t.filter((function(t){return t!==e}))})):i((function(t){return[].concat(Object(o.a)(t),[e])}))};Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("favoriteList"));e&&i(e)}),[]),Object(n.useEffect)((function(){var e=JSON.stringify(c);localStorage.setItem("favoriteList",e)}),[c]);var q=m.map((function(e){return e.title?r.a.createElement(O,{allGenreList:C,key:e.id,content:e,isFavorite:c.includes(e.id),switchFavorite:H}):null})),V=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!0),s=Object(l.a)(i,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){if(u)e.forEach((function(e){d("movie/".concat(e),{language:"ru"}).then((function(e){c((function(t){return[].concat(Object(o.a)(t),[e])}))}))})),e.length&&m(!1);else{var t=r.filter((function(t){return e.includes(t.id)})),a=t.map((function(e){return e.id})),n=e.filter((function(e){return!a.includes(e)}));c(t),n.forEach((function(e){d("movie/".concat(e),{language:"ru"}).then((function(e){c((function(t){return[].concat(Object(o.a)(t),[e])}))}))}))}}),[e]),r}(c).map((function(e){return r.a.createElement(O,{allGenreList:C,key:e.id,content:e,isFavorite:c.includes(e.id),switchFavorite:H})})),P=Object(n.useCallback)((function(e){_?function(e,t,a,n,r){d("search/movie",{language:"ru",page:e,query:t}).then((function(e){a((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e.results))})),n(e.page),r(e.total_pages)}))}(e,_,f,E,w):function(e,t,a,n,r,c){d("discover/movie",{language:"ru",page:e,sort_by:"".concat(t,".").concat(a)}).then((function(e){n((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e.results))})),r(e.page),c(e.total_pages)}))}(e,B,z,f,E,w)}),[_,B,z]);return Object(n.useEffect)((function(){f([]),P(1)}),[_,B,z,P]),console.log("/TMDb-client"),r.a.createElement(v.a,null,r.a.createElement($.a,null),r.a.createElement("div",null,r.a.createElement(W,{searchState:_,setSearchState:R,favoriteCards:V}),r.a.createElement("div",{className:e.root},r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"".concat("/TMDb-client","/details/:movieDetailId"),render:function(e){return r.a.createElement(Y,Object.assign({key:e.location.key,favoriteList:c,switchFavorite:H,allGenreList:C},e))}}),r.a.createElement(M.a,{path:"".concat("/TMDb-client","/"),exact:!0},!_&&r.a.createElement(ae,{setDiscoverSortBy:T,setDiscoverSortOrder:J}),r.a.createElement(p.a,{initialLoad:!1,hasMore:h<x,loadMore:function(){return P(h+1)},loader:r.a.createElement("div",{key:"loader",className:e.cardsContainer},r.a.createElement(X,null))},r.a.createElement("div",{className:e.cardsContainer},q)))))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.1d30ab4d.chunk.js.map